## 📆 2021-06-03(목) TIL

### 📈 어제의 계획이 예상대로 진행됐나요?
- [ ] 바닐라 자바스크립트 과제 보너스 하나 풀기
- [ ] 프로그래머스 코테 문제들 풀기
- [x] 코드숨 개인 프로젝트에 e2e 테스트를 위한 Codeceptjs를 적용하기
  - [메인 페이지에 대한 e2e 테스트를 작성하라](https://github.com/CodeSoom/ConStu/pull/196)
  - [스터디 개설 페이지에 대한 e2e 테스트를 작성하라](https://github.com/CodeSoom/ConStu/pull/197)

### 🦄 이번주 목표 진행사항은요? (오늘 조금이라도 진행했으면 체크)
- ~~Do it TS 책 12장까지 읽고 스터디 참여~~
- ~~린 UX 책 8장까지 읽고 스터디 참여~~
- [ ] 프로그래머스 코테 문제들 풀기
- ~~코어 자바스크립트 마무리 짓기~~
- [ ] 바닐라 자바스크립트 스터디 참여하기
- [x] 코드숨 개인 프로젝트 e2e 테스트를 위한 Codeceptjs 적용하기
- ~~페캠 네카라쿠배 지원~~
- [ ] 면접 질문 준비하기

### 🤔 공부하면서 배운것이 있다면?
- Codeceptjs에서 `commentStep` 작성 하는 방법
- 플러그인에 `commentStep` 추가

```js
// codeceptjs.conf.js

exports.config = {
  // ...
  plugins: {
    // ...
    commentStep: {
      enabled: true,
    },
    // ...
  },
};
```

- 방법이 세가지 정도 있었는데 나는 마지막 방법인 커스텀을하여 작성하는 방법을 택했다.
- 이유는 `Given`, `When`, `Then`을 명시적으로 적어줄 수 있기 때문에 각 테스트에서 주석을 없애고 다음과 해줄 수 있었다.

```js
const step = codeceptjs.container.plugins('commentStep');

const Given = () => step`Given`;
const When = () => step`When`;
const Then = () => step`Then`;

Before(({ login }) => {
  Given('로그인한 사용자만 스터디를 개설할 수 있다.');
  login('user');
});

Scenario('제목이 입력되지 않았을 경우', ({ I }) => {
  Given('스터디 개설 페이지에서');
  I.click('스터디 개설하기');

  When('제목을 작성하지 않고 "등록하기" 버튼을 클릭하면');
  I.fillField('input[name=title]', '');
  I.click('등록하기');

  Then('"제목을 입력해주세요." 메시지가 보인다.');
  I.see('제목을 입력해주세요.');
});
```

- 비동기적으로 처리되는 로직을 테스트하기 위해 `autoDelay` 플러그인을 추가할 수 있었다.
- 또한, api 호출과 같은 비동기적 처리 로직을 `wait`와 관련된 메서드나 `await`를 사용하는 `grab`관련 메서드를 사용해서 해결할 수 있다. 스터디 개설 후 비동기적 통신 때문에 이후의 `url`을 찾을 때 다음과 같이 해결 할 수 있었다.

```js
Scenario('올바르게 스터디 개설을 한 경우', async ({ I }) => {
  Given('스터디 개설 페이지에서');
  I.click('스터디 개설하기');

  When('스터디에 관한 정보들을 작성한 뒤 "등록하기" 버튼을 클릭하면');
  // 정보작성 생략..
  I.pressKey('Enter');
  I.click('등록하기');

  Then('해당 작성 페이지로 이동한다');
  I.waitInUrl('/introduce', 2); // url에 introduce가 포함되어 있을 때까지 2초 동안 기다린다.
  const url = await I.grabCurrentUrl(); // 현재 Url을 반환한다.
  const splitUrl = url.split('/'); // 이걸 한 이유가 introduce/{글Id} 이기 떄문에 "/"으로 잘랐다.

  // 현재 Url를 맞는지 비교한다.
  I.seeCurrentUrlEquals(`/introduce/${splitUrl[splitUrl.length - 1]}`);

  // After - 해당 게시글을 삭제한다.
  I.click('삭제');
  I.click('확인');
});
```

### ⚡ 아쉬운 점 및 회고
- 오늘은 좀 일찍 자볼려고한다.
- 사실 일찍도 아니지만..
- 항상 새로운것을 배우는것은 즐겁다. 재밌다. 더 발전하기 위해서 새로운 지식을 습득하는건 좋은 에너지를 발산한다.
- 하지만, 많이 부족하고 부족하다는걸 꺠닫는다. 코드를 잘짜기위해서 노력을 많이 하는 편이지만, 되돌아보면 왜 이렇게 짤수밖에 없었을까? 라는 생각이 많이들곤한다. 왜 그렇게 짰을까를 생각해본다면, 좀 생각을 대충한 경향이 있는듯하다. 좋지 않은 습관이다.
- 그리고 셀프 코드리뷰를 해야하는데 귀찮아서 자꾸 생략하게 된다. 하지만 셀프 코드리뷰를 통해서 내가 짰지만 다시 보면 안보이던 게 보이게된다. 이게 진짜 아이러니한데 분명 짤때는 안보인게 PR을 날린뒤 코드를 확인해보면 안보이던게 보인다. 이래서 셀프 코드리뷰를 하라는가본다라는 생각이 든다.
- 배우고 싶은게 많고 적용해보고 싶은것들도 너무 많은데, 현재 내 상황을 봤을 떄 그렇지 못한 환경인거 같다.
- 그리고 항상 얘기하지만 우선순위를 잘 정할 필요가 있어보인다. 내가 현재 중요한것. 그게 뭔지 명확하고 심각하게 파악하여 판단하는 능력이 있어야 할 듯하다.
- 내일은 좀 쉬어야겠다. 하지만, 하루종일 쉰다는 의미는 아니라 공부시간을 줄이자는 뜻이다.

### 🚀 내일 할 일
- 바닐라 자바스크립트 과제 보너스 하나 풀기
- 프로그래머스 코테 문제들 풀기

### 🎯 이번주 목표
- ~~Do it TS 책 12장까지 읽고 스터디 참여~~
- ~~린 UX 책 8장까지 읽고 스터디 참여~~
- 프로그래머스 코테 문제들 풀기
- ~~코어 자바스크립트 마무리 짓기~~
- 바닐라 자바스크립트 과제 풀기
- ~~페캠 네카라쿠배 지원~~
- 면접 질문 준비하기
- 코드숨 개인 프로젝트에 e2e 테스트를 위한 Codeceptjs를 적용하기
